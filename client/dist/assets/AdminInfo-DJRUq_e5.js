import{F as r,r as c,P as D,Q as R,U as G,j as e,I as h,B as p,G as K,M as k,y as O,s as d}from"./index-CMEssXRz.js";import{A as _}from"./AdminLayout-B_3Hrh73.js";import{E as $}from"./Editor-BOX0dwul.js";import{S as j}from"./index-B2SgWHdp.js";import{F as q}from"./Table-CKS-BAtf.js";import{S as I}from"./index-BKxVm03t.js";import{R as B}from"./DeleteOutlined-CiED4gRi.js";import"./CalendarOutlined-D6AB9xU5.js";import"./index-nwPSw83I.js";import"./Pagination-CTc53qC1.js";const{Option:y}=I,Z=()=>{const[s]=r.useForm(),[S,m]=c.useState(!1),[b,F]=c.useState(""),[l,u]=c.useState(null),[t,g]=c.useState({current:1,pageSize:10}),{data:n,isLoading:T,refetch:x}=D({page:t.current,limit:t.pageSize,search:b}),[v]=R(),[w]=G(),C=a=>{g(a)},M=a=>{F(a),g({...t,current:1})},f=(a=null)=>{u(a),a?s.setFieldsValue({id:a.id,title:a.judul,category:a.kategori,value:a.teks}):s.resetFields(),m(!0)},P=()=>{m(!1),u(null),s.resetFields()},E=async()=>{try{const a=await s.validateFields();await v(a),d.success(`Informasi berhasil ${l?"diperbarui":"ditambahkan"}`),m(!1),u(null),s.resetFields(),x()}catch{d.error(`Gagal ${l?"memperbarui":"menambahkan"} informasi`)}},A=async a=>{k.confirm({title:"Apakah anda yakin ingin menghapus informasi ini?",content:"Data informasi akan dihapus secara permanen",okText:"Ya",cancelText:"Tidak",onOk:async()=>{var i;try{const o=await w(a);d.success(o.message),x()}catch(o){d.error(((i=o.data)==null?void 0:i.message)||"Gagal menghapus informasi")}}})},z=[{title:"No",key:"no",render:(a,i,o)=>(t.current-1)*t.pageSize+o+1},{title:"Judul",dataIndex:"judul",key:"judul"},{title:"Kategori",dataIndex:"kategori",key:"kategori"},{title:"Action",key:"action",render:(a,i)=>e.jsxs(j,{size:"middle",children:[e.jsx(p,{type:"primary",icon:e.jsx(O,{}),onClick:()=>f(i),children:"Edit"}),e.jsx(p,{type:"primary",danger:!0,icon:e.jsx(B,{}),onClick:()=>A(i.id),children:"Delete"})]})}];return e.jsxs(_,{title:"Informasi",children:[e.jsx("div",{style:{marginBottom:16},children:e.jsxs(j,{children:[e.jsx(h.Search,{placeholder:"Cari informasi",onSearch:M,style:{width:200}}),e.jsx(p,{type:"primary",icon:e.jsx(K,{}),onClick:()=>f(),children:"Tambah Informasi"})]})}),e.jsx(q,{columns:z,dataSource:n==null?void 0:n.infos,rowKey:"id",pagination:{...t,total:(n==null?void 0:n.totalPages)*t.pageSize},loading:T,onChange:C}),e.jsx(k,{title:l?"Edit Informasi":"Tambah Informasi",open:S,onOk:E,onCancel:P,width:800,children:e.jsxs(r,{form:s,layout:"vertical",children:[l&&e.jsx(r.Item,{name:"id",label:"ID",children:e.jsx(h,{disabled:!0})}),e.jsx(r.Item,{name:"title",label:"Judul",rules:[{required:!0,message:"Silakan masukkan judul!"}],children:e.jsx(h,{})}),e.jsx(r.Item,{name:"category",label:"Kategori",rules:[{required:!0,message:"Silakan pilih kategori!"}],children:e.jsxs(I,{placeholder:"Pilih kategori",children:[e.jsx(y,{value:"Pembayaran",children:"Pembayaran"}),e.jsx(y,{value:"Pengumuman",children:"Pengumuman"})]})}),e.jsx(r.Item,{name:"value",label:"Konten",rules:[{required:!0,message:"Silakan masukkan konten!"}],children:e.jsx($,{})})]})})]})};export{Z as default};
