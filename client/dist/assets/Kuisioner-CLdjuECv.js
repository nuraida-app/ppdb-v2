import{ac as ce,ae as le,al as K,r as i,af as de,ag as M,ah as ue,bP as me,am as pe,ch as ge,bc as fe,bg as he,cF as be,bh as ye,cv as xe,cG as ve,cH as z,cI as je,bm as Ce,aI as Se,aJ as Ie,a2 as $e,V as we,k as ke,cJ as Ee,j as s,a as I,T as Ne,I as Te,B as Ae,s as $}from"./index-CMEssXRz.js";import{U as E}from"./UserLayout-nMT1gBCx.js";import{S as N}from"./index-B2SgWHdp.js";import{R as S}from"./index-nwPSw83I.js";const k=(e,o,r,t,a)=>({background:e,border:`${K(t.lineWidth)} ${t.lineType} ${o}`,[`${a}-icon`]:{color:r}}),Oe=e=>{const{componentCls:o,motionDurationSlow:r,marginXS:t,marginSM:a,fontSize:u,fontSizeLG:d,lineHeight:g,borderRadiusLG:p,motionEaseInOutCirc:m,withDescriptionIconSize:h,colorText:b,colorTextHeading:v,withDescriptionPadding:y,defaultPadding:n}=e;return{[o]:Object.assign(Object.assign({},le(e)),{position:"relative",display:"flex",alignItems:"center",padding:n,wordWrap:"break-word",borderRadius:p,[`&${o}-rtl`]:{direction:"rtl"},[`${o}-content`]:{flex:1,minWidth:0},[`${o}-icon`]:{marginInlineEnd:t,lineHeight:0},"&-description":{display:"none",fontSize:u,lineHeight:g},"&-message":{color:v},[`&${o}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${r} ${m}, opacity ${r} ${m},
        padding-top ${r} ${m}, padding-bottom ${r} ${m},
        margin-bottom ${r} ${m}`},[`&${o}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${o}-with-description`]:{alignItems:"flex-start",padding:y,[`${o}-icon`]:{marginInlineEnd:a,fontSize:h,lineHeight:0},[`${o}-message`]:{display:"block",marginBottom:t,color:v,fontSize:d},[`${o}-description`]:{display:"block",color:b}},[`${o}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},Me=e=>{const{componentCls:o,colorSuccess:r,colorSuccessBorder:t,colorSuccessBg:a,colorWarning:u,colorWarningBorder:d,colorWarningBg:g,colorError:p,colorErrorBorder:m,colorErrorBg:h,colorInfo:b,colorInfoBorder:v,colorInfoBg:y}=e;return{[o]:{"&-success":k(a,t,r,e,o),"&-info":k(y,v,b,e,o),"&-warning":k(g,d,u,e,o),"&-error":Object.assign(Object.assign({},k(h,m,p,e,o)),{[`${o}-description > pre`]:{margin:0,padding:0}})}}},Re=e=>{const{componentCls:o,iconCls:r,motionDurationMid:t,marginXS:a,fontSizeIcon:u,colorIcon:d,colorIconHover:g}=e;return{[o]:{"&-action":{marginInlineStart:a},[`${o}-close-icon`]:{marginInlineStart:a,padding:0,overflow:"hidden",fontSize:u,lineHeight:K(u),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${r}-close`]:{color:d,transition:`color ${t}`,"&:hover":{color:g}}},"&-close-text":{color:d,transition:`color ${t}`,"&:hover":{color:g}}}}},Be=e=>({withDescriptionIconSize:e.fontSizeHeading3,defaultPadding:`${e.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${e.paddingMD}px ${e.paddingContentHorizontalLG}px`}),Pe=ce("Alert",e=>[Oe(e),Me(e),Re(e)],Be);var G=function(e,o){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&o.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(e);a<t.length;a++)o.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(r[t[a]]=e[t[a]]);return r};const He={success:ye,info:be,error:he,warning:fe},_e=e=>{const{icon:o,prefixCls:r,type:t}=e,a=He[t]||null;return o?ge(o,i.createElement("span",{className:`${r}-icon`},o),()=>({className:M(`${r}-icon`,o.props.className)})):i.createElement(a,{className:`${r}-icon`})},Le=e=>{const{isClosable:o,prefixCls:r,closeIcon:t,handleClose:a,ariaProps:u}=e,d=t===!0||t===void 0?i.createElement(xe,null):t;return o?i.createElement("button",Object.assign({type:"button",onClick:a,className:`${r}-close-icon`,tabIndex:0},u),d):null},J=i.forwardRef((e,o)=>{const{description:r,prefixCls:t,message:a,banner:u,className:d,rootClassName:g,style:p,onMouseEnter:m,onMouseLeave:h,onClick:b,afterClose:v,showIcon:y,closable:n,closeText:c,closeIcon:l,action:w,id:W}=e,F=G(e,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[B,Q]=i.useState(!1),P=i.useRef(null);i.useImperativeHandle(o,()=>({nativeElement:P.current}));const{getPrefixCls:V,direction:Y,closable:j,closeIcon:H,className:X,style:U}=de("alert"),f=V("alert",t),[Z,q,ee]=Pe(f),ne=x=>{var C;Q(!0),(C=e.onClose)===null||C===void 0||C.call(e,x)},_=i.useMemo(()=>e.type!==void 0?e.type:u?"warning":"info",[e.type,u]),oe=i.useMemo(()=>typeof n=="object"&&n.closeIcon||c?!0:typeof n=="boolean"?n:l!==!1&&l!==null&&l!==void 0?!0:!!j,[c,l,n,j]),L=u&&y===void 0?!0:y,te=M(f,`${f}-${_}`,{[`${f}-with-description`]:!!r,[`${f}-no-icon`]:!L,[`${f}-banner`]:!!u,[`${f}-rtl`]:Y==="rtl"},X,d,g,ee,q),re=ue(F,{aria:!0,data:!0}),se=i.useMemo(()=>typeof n=="object"&&n.closeIcon?n.closeIcon:c||(l!==void 0?l:typeof j=="object"&&j.closeIcon?j.closeIcon:H),[l,n,c,H]),ae=i.useMemo(()=>{const x=n??j;if(typeof x=="object"){const{closeIcon:C}=x;return G(x,["closeIcon"])}return{}},[n,j]);return Z(i.createElement(me,{visible:!B,motionName:`${f}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:x=>({maxHeight:x.offsetHeight}),onLeaveEnd:v},(x,C)=>{let{className:D,style:ie}=x;return i.createElement("div",Object.assign({id:W,ref:pe(P,C),"data-show":!B,className:M(te,D),style:Object.assign(Object.assign(Object.assign({},U),p),ie),onMouseEnter:m,onMouseLeave:h,onClick:b,role:"alert"},re),L?i.createElement(_e,{description:r,icon:e.icon,prefixCls:f,type:_}):null,i.createElement("div",{className:`${f}-content`},a?i.createElement("div",{className:`${f}-message`},a):null,r?i.createElement("div",{className:`${f}-description`},r):null),w?i.createElement("div",{className:`${f}-action`},w):null,i.createElement(Le,{isClosable:oe,prefixCls:f,closeIcon:se,handleClose:ne,ariaProps:ae}))}))});function De(e,o,r){return o=z(o),ve(e,je()?Reflect.construct(o,r||[],z(e).constructor):o.apply(e,r))}let ze=function(e){function o(){var r;return Ie(this,o),r=De(this,o,arguments),r.state={error:void 0,info:{componentStack:""}},r}return Ce(o,e),Se(o,[{key:"componentDidCatch",value:function(t,a){this.setState({error:t,info:a})}},{key:"render",value:function(){const{message:t,description:a,id:u,children:d}=this.props,{error:g,info:p}=this.state,m=(p==null?void 0:p.componentStack)||null,h=typeof t>"u"?(g||"").toString():t,b=typeof a>"u"?m:a;return g?i.createElement(J,{id:u,type:"error",message:h,description:i.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},b)}):d}}])}(i.Component);const R=J;R.ErrorBoundary=ze;const{Title:T,Text:A}=Ne,{TextArea:Ge}=Te,O=e=>({__html:e}),Qe=()=>{const e=$e(n=>n.auth.user),[o,r]=i.useState({}),{data:t,isLoading:a,error:u}=we({page:"",limit:"",search:""}),{data:d}=ke(e==null?void 0:e.id,{skip:!(e!=null&&e.id)}),[g]=Ee(),p=t==null?void 0:t.filter(n=>n.jenis==="Kuisioner"&&n.pengisi==="Ortu"),m=t==null?void 0:t.filter(n=>n.jenis==="Angket"&&n.pengisi==="Ortu"),h=t==null?void 0:t.filter(n=>n.jenis==="Angket"&&n.pengisi==="Calon Peserta Didik");i.useEffect(()=>{if(d){const n={};d.forEach(c=>{n[c.soal_id]=c.jawaban}),r(n)}},[d]);const b=(n,c)=>{r(l=>({...l,[n]:c}))},v=n=>{const c=o[n];if(!c||c.trim()===""){$.error("Jawaban tidak boleh kosong.");return}const l={userId:e==null?void 0:e.id,answer:c,quizId:n};g(l).unwrap().then(()=>{$.success("Jawaban berhasil disimpan")}).catch(w=>{$.error("Gagal menyimpan jawaban")})},y=(n,c)=>{const l={userId:e==null?void 0:e.id,answer:c,quizId:n};g(l).unwrap().then(()=>{$.success("Jawaban berhasil disimpan")}).catch(w=>{$.error("Gagal menyimpan jawaban")})};return a?s.jsx(E,{title:"Kuisioner",children:s.jsx(I,{children:s.jsx("div",{className:"text-center",children:"Loading..."})})}):u?s.jsx(E,{title:"Kuisioner",children:s.jsx(R,{message:"Error",description:"Terjadi kesalahan saat memuat data kuisioner",type:"error",showIcon:!0})}):s.jsx(E,{title:"Kuisioner",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[p&&p.length>0&&s.jsxs(I,{className:"mb-6",style:{borderRadius:12,boxShadow:"0 2px 8px #f0f1f2"},children:[s.jsx(T,{level:4,children:"Kuisioner untuk Orang Tua"}),s.jsx(A,{type:"secondary",className:"block mb-4",children:"Silakan isi kuisioner berikut dengan jujur dan teliti"}),s.jsx(N,{direction:"vertical",size:"large",style:{width:"100%"},children:p.map((n,c)=>s.jsxs(I,{style:{background:"#fafcff",borderRadius:10,border:"1px solid #e6f4ff",boxShadow:"0 1px 4px #e6f4ff",marginBottom:0},children:[s.jsxs("div",{className:"font-bold mb-2",style:{fontSize:16},children:[c+1,"."," ",s.jsx("span",{dangerouslySetInnerHTML:O(n.soal)})]}),s.jsx(Ge,{rows:4,placeholder:"Ketik jawaban Anda di sini...",value:o[n.id]||"",onChange:l=>b(n.id,l.target.value),style:{marginBottom:12,borderRadius:8}}),s.jsx("div",{style:{textAlign:"right"},children:s.jsx(Ae,{type:"primary",onClick:()=>v(n.id),style:{borderRadius:6,padding:"0 24px"},children:"Simpan Jawaban"})})]},n.id))})]}),m&&m.length>0&&s.jsxs(I,{className:"mb-6",children:[s.jsx(T,{level:4,children:"Angket untuk Orang Tua"}),s.jsx(A,{type:"secondary",className:"block mb-4",children:"Mohon isi angket berikut sesuai dengan kondisi yang sebenarnya"}),m.map(n=>{var c;return s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"font-bold mb-2",dangerouslySetInnerHTML:O(n.soal)}),s.jsx(S.Group,{onChange:l=>y(n.id,l.target.value),value:((c=d==null?void 0:d.find(l=>l.soal_id===n.id))==null?void 0:c.jawaban)||void 0,children:s.jsxs(N,{direction:"vertical",children:[s.jsx(S,{value:"Ya",children:"Ya"}),s.jsx(S,{value:"Tidak",children:"Tidak"})]})})]},n.id)})]}),h&&h.length>0&&s.jsxs(I,{children:[s.jsx(T,{level:4,children:"Angket untuk Calon Peserta Didik"}),s.jsx(A,{type:"secondary",className:"block mb-4",children:"Silakan isi angket berikut sesuai dengan kemampuan dan minat Anda"}),h.map(n=>{var c;return s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"font-bold mb-2",dangerouslySetInnerHTML:O(n.soal)}),s.jsx(S.Group,{onChange:l=>y(n.id,l.target.value),value:((c=d==null?void 0:d.find(l=>l.soal_id===n.id))==null?void 0:c.jawaban)||void 0,children:s.jsxs(N,{direction:"vertical",children:[s.jsx(S,{value:"Ya",children:"Ya"}),s.jsx(S,{value:"Tidak",children:"Tidak"})]})})]},n.id)})]}),(!p||p.length===0)&&(!m||m.length===0)&&(!h||h.length===0)&&s.jsx(R,{message:"Tidak Ada Kuisioner",description:"Belum ada kuisioner yang tersedia untuk Anda",type:"info",showIcon:!0})]})})};export{Qe as default};
